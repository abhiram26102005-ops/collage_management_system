(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function o(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=o(t);fetch(t.href,a)}})();function l(){if(!localStorage.getItem("students")){const e=[{id:"STU001",name:"Rajesh Kumar",email:"rajesh@example.com",phone:"9876543210",department:"CSE",year:"3",username:"student1",password:"student123"},{id:"STU002",name:"Priya Sharma",email:"priya@example.com",phone:"9876543211",department:"CSE",year:"3",username:"student2",password:"student123"},{id:"STU003",name:"Amit Patel",email:"amit@example.com",phone:"9876543212",department:"ECE",year:"2",username:"student3",password:"student123"},{id:"STU004",name:"Sneha Reddy",email:"sneha@example.com",phone:"9876543213",department:"MECH",year:"4",username:"student4",password:"student123"},{id:"STU005",name:"Vikram Singh",email:"vikram@example.com",phone:"9876543214",department:"CIVIL",year:"1",username:"student5",password:"student123"}];localStorage.setItem("students",JSON.stringify(e));const n=[{id:"FAC001",name:"Dr. Ramesh Verma",email:"ramesh@example.com",phone:"9876543220",department:"CSE",designation:"Professor",username:"faculty1",password:"faculty123"},{id:"FAC002",name:"Dr. Sunita Gupta",email:"sunita@example.com",phone:"9876543221",department:"ECE",designation:"Associate Professor",username:"faculty2",password:"faculty123"},{id:"FAC003",name:"Prof. Anil Kumar",email:"anil@example.com",phone:"9876543222",department:"MECH",designation:"Assistant Professor",username:"faculty3",password:"faculty123"},{id:"FAC004",name:"Dr. Kavita Joshi",email:"kavita@example.com",phone:"9876543223",department:"CIVIL",designation:"Lecturer",username:"faculty4",password:"faculty123"}];localStorage.setItem("faculty",JSON.stringify(n));const o=[{code:"CS301",name:"Data Structures",department:"CSE",year:"3",credits:4,facultyId:"FAC001"},{code:"CS302",name:"Database Systems",department:"CSE",year:"3",credits:4,facultyId:"FAC001"},{code:"EC201",name:"Digital Electronics",department:"ECE",year:"2",credits:4,facultyId:"FAC002"},{code:"ME401",name:"Thermodynamics",department:"MECH",year:"4",credits:3,facultyId:"FAC003"},{code:"CE101",name:"Engineering Mechanics",department:"CIVIL",year:"1",credits:4,facultyId:"FAC004"}];localStorage.setItem("subjects",JSON.stringify(o));const t=[{username:"admin",password:"admin123",role:"admin",name:"System Administrator"},...e.map(s=>({username:s.username,password:s.password,role:"student",id:s.id,name:s.name})),...n.map(s=>({username:s.username,password:s.password,role:"faculty",id:s.id,name:s.name}))];localStorage.setItem("users",JSON.stringify(t));const a=[];localStorage.setItem("attendance",JSON.stringify(a));const r=[];localStorage.setItem("marks",JSON.stringify(r));const c=[];localStorage.setItem("announcements",JSON.stringify(c))}}l();function u(){return JSON.parse(localStorage.getItem("users")||"[]")}function f(e){localStorage.setItem("currentUser",JSON.stringify(e))}document.addEventListener("DOMContentLoaded",()=>{p()});function p(){const e=document.getElementById("login-form");e&&e.addEventListener("submit",y),h()}async function y(e){e.preventDefault();const n=document.getElementById("role").value,o=document.getElementById("username").value,i=document.getElementById("password").value;if(S(),!n||!o||!i){d("Please fill in all fields");return}const a=u().find(r=>r.username===o&&r.password===i&&r.role===n);a?(f(a),m(a.role)):d("Invalid credentials. Please check your username, password, and role.")}function h(){const e=g();e&&window.location.pathname==="/index.html"&&m(e.role),!e&&window.location.pathname!=="/index.html"&&window.location.pathname!=="/"&&(window.location.href="/index.html")}function g(){const e=localStorage.getItem("currentUser");return e?JSON.parse(e):null}function m(e){switch(e){case"admin":window.location.href="/admin/admin-dashboard.html";break;case"faculty":window.location.href="/faculty/faculty-dashboard.html";break;case"student":window.location.href="/student/student-dashboard.html";break;default:d("Invalid role")}}function d(e){const n=document.getElementById("error-message");n&&(n.textContent=e,n.style.display="block")}function S(){const e=document.getElementById("error-message");e&&(e.style.display="none")}
